@main("Sprint Information") {

<div class="ui left inverted vertical menu sidebar">
    <div class="item">
        <div id="hide-sidebar" class="button">
            <i class="sidebar icon"></i>
        </div>
    </div>
    @if(Sprint.find.where().eq("sprintID", session.get("sprintID")).findUnique() != null){
        @defining(Sprint.find.where().eq("sprintID", session.get("sprintID")).findUnique()) { sprint =>
            @if(sprint.stories != null) {
                @for(story <- sprint.stories) {
                <a class="item" id="Story_@story.getId()" href="@routes.Application.renderStory(sprint.getId(), story.getId())">
                    @story.name
                </a>
                }
            }
        }
    }
</div>


<div class="pusher">

    <div id="show-sidebar" class="button toggler">
        <i class="sidebar icon"></i>
        Stories
    </div>

    <div class="middle-bar">
        <div class="content-container">
            @if(Story.find.where().eq("storyID", session.get("storyID")).findUnique() != null){
                @defining(Story.find.where().eq("storyID", session.get("storyID")).findUnique()) { story =>
                    @if(story.tasks != null) {
                        @for(status <- models.providers.Context.getInstance().getStoryStatusStates()) {
                        <div class="taskStatus">
                            <i class="fa fa-rocket"></i>
                            <h2 style="text-align: center;">@status</h2>
                            <button style="margin-top: -15px;" class="btn btn-success" data-remodal-target="taskCreationModal">
                                Add task
                            </button>
                                @for(task <- story.getTasksWithStatus(status)) {
                                <div class="task">
                                    <div class="task" data-remodal-id="@task.getId()">
                                        @task.name
                                        <a data-remodal-target="taskViewModal"><i style= "float: right;" class="icon-edit"></i></a>
                                    </div>
                                </div>
                                }<!-- end of tasks in that column-->
                            </div>
                            }<!-- end of top for loop, column for each status-->
                    }
                }
            }
        </div>
    </div>

    <div class="remodal-bg">
        <div class="remodal" data-remodal-id="taskCreationModal">
            <button data-remodal-action="close" class="remodal-close"></button>
            @helper.form(action = routes.Application.createTask, 'id -> "taskForm") {
            <h1>Create a Task</h1>
            <p>
                Create a Task for your Story.
            </p>

            <div class="form-group">
                <input id="taskName" type="text" placeholder="Task Name" name="name" required>
                <select name="status">
                    <option>Created</option>
                    <option>Started</option>
                    <option>In Review</option>
                    <option>Complete</option>
                </select>
            </div>
            <br>
            <button data-remodal-action="cancel" class="remodal-cancel">Cancel</button>
            <button id="createTask" type="submit" data-remodal-action="confirm" class="remodal-confirm">Create</button>
            } <!-- end form -->
        </div>
    </div>

    <!-- taskViewModal-->
    <div class="remodal-bg">
        <div class="remodal" data-remodal-id="taskViewModal">
            <button data-remodal-action="close" class="remodal-close"></button>

            <h1>Task</h1>
            <p>

            </p>
            @helper.form(action = routes.Application.createComment, 'id -> "commentForm") {
            <h2>Create Comments</h2>
            <div class="form-group">
                <input id="commentName" type="text" placeholder="Task Name" name="name" required>
                <select name="status">
                    <option>Created</option>
                    <option>Started</option>
                    <option>In Review</option>
                    <option>Complete</option>
                </select>
            </div>
            <br>
            <button data-remodal-action="cancel" class="remodal-cancel">Cancel</button>
            <button id="createComment" type="submit" data-remodal-action="confirm" class="remodal-confirm">Create</button>
            } <!-- end form -->
        </div>
    </div>
</div>

}